<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <title>Sample Certificate Identity Declaration - StoreFront SDK Documentation</title>
  

  <link rel="shortcut icon" href="
https://www.citrix.com/etc/designs/citrix/icon-favicon.png">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  <link rel="stylesheet" href="../css/override.css" type="text/css" />
  <link rel="stylesheet" href="../css/font-awesome.css" type="text/css" />

  
  <script>
    // Current page data
    var mkdocs_page_name = "Sample Certificate Identity Declaration";
    var mkdocs_page_input_path = "sample-certificate-identity-declaration.md";
    var mkdocs_page_url = "/sample-certificate-identity-declaration/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script>
  <script src="../js/custom.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

	<div class="header-top">
		<div class="header-top-left">
			<a href="http://citrix.github.io" class="logo-position"><img height="60" src="https://thumbnail-ec2.sharefile.com/thumbnail.aspx?encparams=ypL2J0l-In6gqXJ7yeyKP8A1rqwKMH-C8-nfkJcHJNIN7Y0yZiJsYOcUe-uc0YeZzWLQSFSd1FnuMHPa30XSSINHuGOA8nvvnBT5WmjGlKvd5mxJ4IfT7iTVyHELwhWQiNCznPCiIFyhkA78uKX77PlU2iyhM4YdRM1NKabBe-4wXuiFJsbtAxyJ2UukO_E2ZSf1W3l75Dw8G0zflVkT-EFqyx1zSGId0qzLjm6nzJ8dA9zo-1AJzUisdzmGMzHOq_LMsOWyaalvmcWvCkl-q10GBSbfekfTIFW9LpZNYjkLNSnK8rcwNjWVr_jYayrGjIj2e5dDIMiDj3NRvW51AvHRjxYH9xRRRtY$" target="_blank" class="logo-citrix"><span style="color:#fff;font-size: 20px;position: relative;top:4px;left: 5px">SDK Reference</span></a>
		</div>
		<div class="header-top-right">
			<ul>
			<!--	<li class="list-inline home"><a href="..">HOME</a></li>
				<li class="list-inline support"><a href="http://support.citrix.com">SUPPORT</a></li>-->
			<form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
            <li class="list-inline support"><input name="q" id="txtName" type="text" placeholder="Search SDKs" 
            class="searchdocs"><a class="fa fa-search errspan" onclick="getElementById('rtd-search-form').submit()"></a></li>
			</form>
				<!--<li class="list-inline"><a href="http://citrix.com/download">DOWNLOADS</a></li>-->
			</ul>

		</div>
	</div>
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
	<a class="fa fa-search" onclick="getElementById('rtd-search-form').submit()"></a>
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">

		<a class="" style="width:272px;" href="..">Overview</a>
			
		
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span class="expul"><i class="fa fa-plus-square-o" aria-hidden="true"></i>StoreFront Web API</span></li>
        
            
    <li class="toctree-l1 ">

		<a class="" style="width:272px;" href="../overview/">Overview</a>
			
		
        
    </li>

        
            
    <li class="toctree-l1 ">

		<a class="" style="width:272px;" href="../how-the-api-works/">How the API works</a>
			
		
        
    </li>

        
            
    <li class="toctree-l1 ">

		<a class="" style="width:272px;" href="../requests/">Requests</a>
			
		
        
    </li>

        
            
    <li class="toctree-l1 ">

		<a class="" style="width:272px;" href="../using-configuration-elements/">Using configuration elements</a>
			
		
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span class="expul"><i class="fa fa-plus-square-o" aria-hidden="true"></i>StoreFront Store Service SDK</span></li>
        
            
    <li class="toctree-l1 ">

		<a class="" style="width:272px;" href="../customization-sdk/">StoreFront Customization SDK</a>
			
		
        
    </li>

        
            
    <li class="toctree-l1 ">

		<a class="" style="width:272px;" href="../getting-started-with-the-sdk/">Getting started with the SDK</a>
			
		
        
    </li>

        
            
    <li class="toctree-l1 ">

		<a class="" style="width:272px;" href="../customization-interfaces/">Customization interfaces</a>
			
		
        
    </li>

        
            
    <li class="toctree-l1 ">

		<a class="" style="width:272px;" href="../known-issues/">Known issues</a>
			
		
        
    </li>

        
            
    <li class="toctree-l1 ">

		<a class="" style="width:272px;" href="../samples/">Samples</a>
			
		
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span class="expul"><i class="fa fa-plus-square-o" aria-hidden="true"></i>StoreFront Authentication SDK</span></li>
        
            
    <li class="toctree-l1 ">

		<a class="" style="width:272px;" href="../storefront-services-authentication-sdk/">Authentication Software Development Kit</a>
			
		
        
    </li>

        
            
    <li class="toctree-l1 ">

		<a class="" style="width:272px;" href="../citrix-common-forms-authentication-api/">Citrix Common Forms Authentication API</a>
			
		
        
    </li>

        
            
    <li class="toctree-l1 ">

		<a class="" style="width:272px;" href="../citrixauth-authentication-scheme/">CitrixAuth Authentication Scheme</a>
			
		
        
    </li>

        
            
    <li class="toctree-l1 ">

		<a class="" style="width:272px;" href="../common-authentication-forms-language/">Citrix Common Authentication Forms Language</a>
			
		
        
    </li>

        
            
    <li class="toctree-l1 ">

		<a class="" style="width:272px;" href="../security-token-services-api/">Security Token Services API</a>
			
		
        
    </li>

        
            
    <li class="toctree-l1 ">

		<a class="" style="width:272px;" href="../authentication-form-generation/">StoreFront Authentication Form Generation</a>
			
		
        
    </li>

        
            
    <li class="toctree-l1 ">

		<a class="" style="width:272px;" href="../known-issues-auth/">Known Issues</a>
			
		
        
    </li>

        
            
    <li class="toctree-l1 ">

		<a class="" style="width:272px;" href="../storeFront-authentication-sdk-thirdparty/">Third Party Notices</a>
			
		
        
    </li>

        
            
    <li class="toctree-l1 current">

		<a class="current" style="width:272px;" href="./">Sample Certificate Identity Declaration</a>
			
		
        
            <ul style="display:none">
            
				
                <li class="toctree-l3"><span class="expcli" style="margin-left: 10px;"><i class="fa fa-plus-square-o" aria-hidden="true"></i></span><a href="#overview" style="display: inline-table;padding-left: 3px;width:240px;">Overview</a></li>
				<ul style="display:none">
                
                    <li><a class="toctree-l4" href="#introduction">Introduction</a></li>
                
                    <li><a class="toctree-l4" href="#installer">Installer</a></li>
                
				</ul>
				
            
				
                <li class="toctree-l3"><span class="expcli" style="margin-left: 10px;"><i class="fa fa-plus-square-o" aria-hidden="true"></i></span><a href="#code-sample" style="display: inline-table;padding-left: 3px;width:240px;">Code Sample</a></li>
				<ul style="display:none">
                
                    <li><a class="toctree-l4" href="#visual-studio-solution-layout">Visual Studio Solution Layout</a></li>
                
                    <li><a class="toctree-l4" href="#feature-project">Feature Project</a></li>
                
                    <li><a class="toctree-l4" href="#consoleextension-project">Console.Extension Project</a></li>
                
                    <li><a class="toctree-l4" href="#installer-project">Installer Project</a></li>
                
                    <li><a class="toctree-l4" href="#installercustomactions-project">Installer.CustomActions Project</a></li>
                
                    <li><a class="toctree-l4" href="#unit-tests-project">Unit Tests Project</a></li>
                
				</ul>
				
            
				
                <li class="toctree-l3"><span class="expcli" style="margin-left: 10px;"><i class="fa fa-plus-square-o" aria-hidden="true"></i></span><a href="#protocol" style="display: inline-table;padding-left: 3px;width:240px;">Protocol</a></li>
				<ul style="display:none">
                
                    <li><a class="toctree-l4" href="#end-point">End Point</a></li>
                
                    <li><a class="toctree-l4" href="#wire-level">Wire Level</a></li>
                
				</ul>
				
            
            </ul>
        
    </li>

        
            
    <li class="toctree-l1 ">

		<a class="" style="width:272px;" href="../magic-word-sample/">Sample Magic Word</a>
			
		
        
    </li>

        
            
    <li class="toctree-l1 ">

		<a class="" style="width:272px;" href="../sample-test-forms/">Sample Test Forms</a>
			
		
        
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      


      
      <div class="wy-nav-content">
        <div class="rst-content">
         <!-- <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>StoreFront Authentication SDK &raquo;</li>
        
      
    
    <li>Sample Certificate Identity Declaration</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div> -->
          <div role="main">
            <div class="section">
             
                <h1 id="overview"><a class="toclink" href="#overview">Overview</a></h1>
<h2 id="introduction"><a class="toclink" href="#introduction">Introduction</a></h2>
<p>This sample for the StoreFront Authentication SDK demonstrates how to create and add a new authentication protocol, CertificateIdentityDeclaration, to StoreFront.
This protocol allows a client to send a certificate to the server to identify a user, without providing proof that it has access to the associated private key. The service uses the built-in Kerberos S4U support to map this certificate to an account, verify the account, and extract the group information associated with the account. An identification-level token is then constructed that can be used to launch a session where the user has to fully authenticate to gain access.</p>
<h2 id="installer"><a class="toclink" href="#installer">Installer</a></h2>
<p>In common with the other samples, a pre-built installer is provided in addition to the source code.
Before attempting to deploy the pre-built sample installers, it is required to add the certificate at AuthSDK.zip/Certificates/YourCompany.cer to the Third-Party Root Certification Authorities store of the Local Computer account where StoreFront is installed. This is not required for the development machine. If this step is not completed, then the StoreFront Administration Console will display an error because the digital signature of the PowerShell modules associated with this customization will fail to verify.
The installer verifies that there is not an existing customization that implements CertificateIdentityDeclaration before deploying the StoreFront Feature package and the add-ins to the administration console. To actually deploy and enable a sample the “Add/Remove Methods” action from the “Authentication” node of the StoreFront Administration Console should be used.
Before attempting to uninstall a sample, the associated authentication method must first be removed using the “Add/Remove Methods” action. If this is not done, attempting to uninstall will result in a dialog informing the administrator that the feature should be removed using the StoreFront Administration Console first. The sample can then be removed by using the standard “Add/Remove Programs” control panel applet.</p>
<h1 id="code-sample"><a class="toclink" href="#code-sample">Code Sample</a></h1>
<h2 id="visual-studio-solution-layout"><a class="toclink" href="#visual-studio-solution-layout">Visual Studio Solution Layout</a></h2>
<p>The Certificate Identity Declaration solution is composed of five projects:</p>
<ul>
<li>Feature contains the code that will be added to the Authentication Service to control the authentication process, including the ASP.Net MVC Controller that manages the authentication protocol.</li>
<li>Console.Extension contains the code for the administration console, including the data models, action handlers, business logic, and user interface elements.</li>
<li>Installer is a WiX project to create an msi installer to deploy and remove the Certificate Identity Declaration Feature.</li>
<li>Installer.CustomActions contains the msi custom actions required to deploy and remove the Certificate Identity Declaration Feature.</li>
<li>UnitTests contains some simple unit tests to verify the merging of the code into the authentication service, and to verify the behavior of the Service Locator.</li>
</ul>
<p>This sample does not require any configuration, and so does not contain a configuration project or a StoreFront Administration Console View Extension. It also requires no custom deployment steps or PowerShell commands and so does not have a Feature Installer project.
All the projects target the .NET Framework 4.5 and the MSIL platform, unless specifically stated. Projects that target .NET Framework 3.5 are either part of the StoreFront Administration Console, or loaded by the Console. The rationale behind this is discussed in the StoreFront Service Authentication SDK document.</p>
<h2 id="feature-project"><a class="toclink" href="#feature-project">Feature Project</a></h2>
<p>This C# class library project contains a new ASP.MVC Controller for handling the HTTP request and response. The protocol specifies a single request/response pattern that is handled by the Declare() method in the Controller, which performs the following:</p>
<ul>
<li>Verify that the HTTP verb is POST</li>
<li>Verify that the request is an RST</li>
<li>Verify that the client accepts an RSTR response</li>
<li>Verify that the CertificateIdentityDeclaration protocol is enabled</li>
<li>Verify that there is a token-issuing service to issue the token</li>
<li>Verify that a certificate can be extracted from the required header</li>
<li>Use the built-in Kerberos authenticator to validate the certificate</li>
<li>Optionally, log the authentication result</li>
<li>Create and return an RSTR message</li>
</ul>
<p>In addition, there are classes following the standard pattern for logging and tracing to aid with diagnostics.</p>
<h2 id="consoleextension-project"><a class="toclink" href="#consoleextension-project">Console.Extension Project</a></h2>
<p>This C# class library project is responsible for:</p>
<ul>
<li>Providing the localized authentication method name in the StoreFront Administration Console</li>
<li>Providing a single, fixed, status message in the StoreFront Administration Console</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Notes</p>
<p>This project is targeted at .NET Framework 3.5, because it will be loaded by the StoreFront Administration Console.</p>
</div>
<h2 id="installer-project"><a class="toclink" href="#installer-project">Installer Project</a></h2>
<p>This WiX project is responsible for the following:
- Creating the CertificateIdentityDeclaration StoreFront Feature Package
- Creating an installer to:
    - Deploy the Feature Package
    - Deploy the StoreFront Administration Console extension
    - Update the registry so that the StoreFront Administration Console will load the extension</p>
<div class="admonition info">
<p class="admonition-title">Notes</p>
<p>This project is targeted at the x64 platform</p>
</div>
<h2 id="installercustomactions-project"><a class="toclink" href="#installercustomactions-project">Installer.CustomActions Project</a></h2>
<p>This C# class library project uses the standard pattern, as described in the StoreFront Authentication SDK document, with the Feature identifier and Authentication Protocol Name set to appropriate values for this customization.</p>
<div class="admonition info">
<p class="admonition-title">Notes</p>
<ul>
<li>This project is targeted at .NET Framework 3.5.</li>
<li>This project is targeted at the x64 platform to ensure that it has access to the correct registry locations.</li>
</ul>
</div>
<h2 id="unit-tests-project"><a class="toclink" href="#unit-tests-project">Unit Tests Project</a></h2>
<p>This project contains standard: web.config merge and unmerge, route, and protocol choice tests, in addition to tests of the protocol in terms of HTTP request and responses.</p>
<h1 id="protocol"><a class="toclink" href="#protocol">Protocol</a></h1>
<p>This section describes the HTTP-based protocol to use to declare a user identity with a certificate.</p>
<h2 id="end-point"><a class="toclink" href="#end-point">End Point</a></h2>
<ul>
<li>URL: /CertificateIdentityDeclaration</li>
<li>HTTP Method: POST</li>
<li>Authentication: None</li>
<li>Request Content-Type: application/vnd.citrix.requesttoken+xml</li>
<li>Response Content-Type: application/vnd.citrix.requesttokenresponse+xml</li>
</ul>
<p>The client presents the certificate associated with the user with the following header:
X-Citrix-AM-ClientCertificateDeclaration: <base64 Encoded Data>
The data is the result of exporting the public certificate in one of the following formats: Base64-encoded, DER-encoded X.509 certificate, or a PFX/PKCS12 certificate, before base-64 encoding the resulting data.</p>
<h2 id="wire-level"><a class="toclink" href="#wire-level">Wire Level</a></h2>
<p>The following  “wire-level” example shows all the HTTP requests and responses when a client attempts to access a protected service (the resources service) and has to obtain security tokens to be granted access.</p>
<p><strong><em>Request to Service Provider</em></strong></p>
<pre class="codehilite"><code>GET https://www.example.com/resources/v2 HTTP/1.1
Host: www.example.com
Accept: application/vnd.citrix.resources+xml</code></pre>


<p><strong><em>Response from Service Provider</em></strong></p>
<pre class="codehilite"><code>HTTP/1.1 401 Unauthorized
Cache-Control: public, no-store, max-age=0
WWW-Authenticate: CitrixAuth realm=&quot;6b78ab94-a709-4e3a-8b9b-a49ca317c70c&quot;,
                             reqtokentemplate=&quot;&quot;, reason=&quot;notoken&quot;,
                             locations=&quot;https://www.example.com/Citrix/Authentication/auth/v1/token&quot;,
                             serviceroot-hint=https://www.example.com/Citrix/Store/resources/v2</code></pre>


<p>At this point the client has to take the information provided in the CitrixAuth challenge and construct a Request for Security Token message to be POSTed to the URL specified in the challenge.</p>
<p><strong><em>Request to Authentication Service</em></strong></p>
<pre class="codehilite"><code>POST https://www.example.com/Citrix/Authentication/auth/v1/token HTTP/1.1
Content-Type: application/vnd.citrix.requesttoken+xml
Accept: application/vnd.citrix.requesttokenresponse+xml, application/vnd.citrix.requesttokenchoices+xml
Content-Encoding: utf-8
Host: www.example.com
Content-Length: xxx

&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;requesttoken xmlns=&quot;http://citrix.com/delivery-services/1-0/auth/requesttoken&quot;&gt;
  &lt;for-service&gt;6b78ab94-a709-4e3a-8b9b-a49ca317c70c&lt;/for-service&gt;
  &lt;for-service-url&gt;https://www.example.com/Citrix/Store/resources/v2&lt;/for-service-url&gt;
  &lt;reqtokentemplate /&gt;
  &lt;requested-lifetime&gt;1.06:00:00&lt;/requested-lifetime&gt;
&lt;/requesttoken&gt;</code></pre>


<p><strong><em>Response from Service Provider</em></strong></p>
<pre class="codehilite"><code>HTTP/1.1 401 Unauthorized
Cache-Control: public, no-store, max-age=0
WWW-Authenticate: CitrixAuth realm=&quot;32f585f3-054d-4ee5-a714-b0e11e312308&quot;,
                     reqtokentemplate=&quot;&quot;, reason=&quot;notoken&quot;   
                     locations=&quot;https://www.example.com/Citrix/Authentication/auth/v1/protocols&quot;,
                     serviceroot-hint=&quot;https://www.example.com/Citrix/Authentication/auth/v1/token&quot;</code></pre>


<p>Hence, the result of this sequence is another challenge, because the client has not presented the security token required to access the token issuing service. The client must therefore, again, parse the challenge to construct another Request Security Token message and POST it to the indicated Uri, as follows:</p>
<p><strong><em>Request to Authentication Service</em></strong></p>
<pre class="codehilite"><code>POST https://www.example.com/Citrix/Authentication/auth/v1/protocols HTTP/1.1
Content-Type: application/vnd.citrix.requesttoken+xml
Accept: application/vnd.citrix.requesttokenresponse+xml, application/vnd.citrix.requesttokenchoices+xml
Content-Encoding: utf-8
Host: www.example.com
Content-Length: xxx

&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;requesttoken xmlns=&quot;http://citrix.com/delivery-services/1-0/auth/requesttoken&quot;&gt;
  &lt;for-service&gt;32f585f3-054d-4ee5-a714-b0e11e312308&lt;/for-service&gt;
  &lt;for-service-url&gt;https://www.example.com/Citrix/Authentication/auth/v1/token&lt;/for-service-url&gt;
  &lt;reqtokentemplate /&gt;
  &lt;requested-lifetime&gt;1.06:00:00&lt;/requested-lifetime&gt;
&lt;/requesttoken&gt;
Response from Service Provider
HTTP/1.1 300 Multiple Choices
Cache-Control: public, no-store, max-age=0
Content-Type: application/vnd.citrix.requesttokenchoices+xml
Content-Length: xxx

&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;requesttokenchoices xmlns=&quot;http://citrix.com/delivery-services/1-0/auth/requesttokenchoices&quot;&gt;
  &lt;choices&gt;
    &lt;choice&gt;
      &lt;protocol&gt;ExplicitForms&lt;/protocol&gt;
      &lt;location&gt;https://www.example.com/Citrix/Authentication/ExplicitForms/Authenticate&lt;/location&gt;
    &lt;/choice&gt;
    &lt;choice&gt;
      &lt;protocol&gt;CertificateIdentityDeclaration&lt;/protocol&gt;
      &lt;location&gt;
           https://www.example.com/Citrix/Authentication/CertificateIdentityDeclaration
      &lt;/location&gt;
    &lt;/choice&gt;
  &lt;/choices&gt;
&lt;/requesttokenchoices&gt;</code></pre>


<p>In this case the authentication service has responded with a HTTP 300 (Multiple Choices) response, indicating that the security token can be obtained from a choice of URIs. In this case, each choice represents a different authentication protocol.
The client has been configured with a plug-in that knows how to perform CertificateIdentityDeclaration authentication, and so chooses that method by sending the RST to the specified endpoint, as illustrated below:</p>
<p><strong><em>Request to Certificate Identity Declaration End-point</em></strong></p>
<pre class="codehilite"><code>POST https://www.example.com/Citrix/Authentication/CertificateIdentityDeclaration HTTP/1.1
Content-Type: application/vnd.citrix.requesttoken+xml
Accept: application/vnd.citrix.requesttokenresponse+xml
X-Citrix-AM-ClientCertificateDeclaration: &lt;Base64EncodedData&gt;
Host: www.example.com
Content-Length: xxx

&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;requesttoken xmlns=&quot;http://citrix.com/delivery-services/1-0/auth/requesttoken&quot;&gt;
  &lt;for-service&gt;32f585f3-054d-4ee5-a714-b0e11e312308&lt;/for-service&gt;
  &lt;for-service-url&gt;https://www.example.com/Citrix/Authentication/auth/v1/token&lt;/for-service-url&gt;
  &lt;reqtokentemplate /&gt;
  &lt;requested-lifetime&gt;1.06:00:00&lt;/requested-lifetime&gt;
&lt;/requesttoken&gt;</code></pre>


<p>If the certificate represents a valid user, then the server responds with a Request Token Response, as follows:</p>
<pre class="codehilite"><code>HTTP/1.1 200 OK
Cache-Control: no-cache; private; no-store; must-revalidate; max-stale=0; post-check=0;
               pre-check=0; max-age=0
Content-Type: application/vnd.citrix.requesttokenresponse+xml
Content-Length: xxx

&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;requesttokenresponse xmlns=&quot;http://citrix.com/delivery-services/1-0/auth/requesttokenresponse&quot;&gt;
  &lt;for-service&gt;32f585f3-054d-4ee5-a714-b0e11e312308&lt;/for-service&gt;
  &lt;issued&gt;2012-06-12T09:50:53.8436039Z&lt;/issued&gt;
  &lt;expiry&gt;2012-06-13T05:50:53.8436039Z&lt;/expiry&gt;
  &lt;lifetime&gt;0.20:00:00&lt;/lifetime&gt;
  &lt;token-template /&gt;
  &lt;token&gt;H4sIAAAAAAAEAO29B2AcSZYlJi9tynt/Sv8Id/T8DXarOsQ4AAA==&lt;/token&gt;
  &lt;CredentialUpdateInformationList xmlns=&quot;http://citrix.com/authentication/response/1&quot;&gt;
    &lt;CredentialUpdateInformation&gt;
      &lt;CredentialDisplayName&gt;example.com&lt;/CredentialDisplayName&gt;
      &lt;AuthenticationInfoId&gt;Citrix Common Forms 1.0&lt;/AuthenticationInfoId&gt;
      &lt;CredentialUpdateService /&gt;
    &lt;/CredentialUpdateInformation&gt;
  &lt;/CredentialUpdateInformationList&gt;
&lt;/requesttokenresponse&gt;</code></pre>


<p>The client can then use this token to obtain a token to gain access for the resources service.</p>
              
               
            </div>
          </div>

        </div>
      </div>

    </section>

  </div>

<!--<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span class="prev"><a href="../storeFront-authentication-sdk-thirdparty/"><i class="fa fa-angle-left"></i> Previous</a></span>
      
      
        <span class="next"><a href="../magic-word-sample/">Next <i class="fa fa-angle-right"></i></a></span>
      
    </span>
	<div class="footer-right">
		<ul class="social-links">
			<li class="list-inline"><a href="https://twitter.com/citrix"><i class="fa fa-twitter"></i>@citrix</a></li>
			<li class="list-inline"><a href="mailto:support@citrix.com"><i class="fa fa-envelope-o"></i>support@citrix.com</a></li>
		</ul>
		<ul class="inner-pages">
			<li class="list-inline"><a href="http://citrix.com/about/legal">Privacy and Terms</li>
		</ul>
	</div>
</div>-->

</body>
</html>
